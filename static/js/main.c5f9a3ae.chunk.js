(this.webpackJsonpcalculaton=this.webpackJsonpcalculaton||[]).push([[0],{131:function(e,t,n){},133:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(19),r=n.n(i),c=n(16),u=n.n(c),o=n(18),l=n.n(o),h=n(29),p=n(36),b=n(6),d=(n(130),n(31)),f=n(37),j=n(21),m=n(22),O=n(25),v=n(24),g=(n(131),n(23)),x=n(5),k=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).ballRef=s.a.createRef(),a.handeleDown=a.handeleDown.bind(Object(g.a)(a)),a}return Object(m.a)(n,[{key:"handeleDown",value:function(e){var t=this;this.ballRef.current.onmousedown=function(){t.ballRef.current.style.position="absolute",t.ballRef.current.style.zIndex=1,document.body.appendChild(t.ballRef.current),document.onmousemove=function(e){t.moveAt(e)},t.ballRef.current.onmouseup=function(){document.onmousemove=null,t.ballRef.current.onmouseup=null},t.ballRef.current.ondragstart=function(){return!1}}}},{key:"moveAt",value:function(e){this.ballRef.current.style.left=e.pageX-this.ballRef.current.offsetWidth/2+"px",this.ballRef.current.style.top=e.pageY-this.ballRef.current.offsetHeight/2+"px"}},{key:"render",value:function(){var e=this.props,t=e.stiker,n=e.sizeStiker;return Object(x.jsx)("img",{ref:this.ballRef,onMouseDown:this.handeleDown,src:t.thumb_photo,alt:"",width:n.inputValueLong+4,height:n.inputValueHeight+4})}}]),n}(s.a.Component),y=["option"],V=function(e){Object(O.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={inputValueLong:6,inputValueHeight:6,checked:!1,isLoad:!1,items:[],itemsOption:0,stiker:{}},a.itemsMarket(),a}return Object(m.a)(n,[{key:"itemsMarket",value:function(){var e=this;this.props.items.then((function(t){return e.setState({items:t,isLoad:!0})}))}},{key:"calculator",value:function(){var e=0;return this.state.inputValueLong<6||this.state.inputValueHeight<6?"\u041d\u0435\u0432\u0435\u0440\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435":(this.state.checked&&(e=100),4*(this.state.inputValueLong+this.state.inputValueHeight)+e)}},{key:"handlerStiker",value:function(){var e=this,t=this.state.items.filter((function(t){return parseInt(t.id)===parseInt(e.state.itemsOption)}));if(t.length>0)return Object(x.jsx)(k,{stiker:t[0],sizeStiker:{inputValueLong:this.state.inputValueLong,inputValueHeight:this.state.inputValueHeight}})}},{key:"render",value:function(){var e=this;return Object(x.jsxs)(b.k,{style:{height:"400px"},children:[Object(x.jsx)(b.l,{style:{textAlign:"center"},children:"\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440"}),Object(x.jsxs)(b.h,{header:Object(x.jsx)(b.i,{mode:"secondary",children:"\u0420\u0430\u0441\u0447\u0435\u0442 \u0441\u0442\u043e\u0438\u043c\u043e\u0442\u0438 \u043d\u0430\u043a\u043b\u0435\u0435\u043a"}),style:{width:"600px",height:"500px"},children:[Object(x.jsxs)(b.f,{className:"information",children:[Object(x.jsx)(b.g,{top:"\u0414\u043b\u0438\u043d\u0430 \u043d\u0430\u043a\u043b\u0435\u0439\u043a\u0438 (\u0421\u041c)",children:Object(x.jsx)(b.j,{type:"number",style:{width:"200px"},value:this.state.inputValueLong,onChange:function(t){return e.setState({inputValueLong:parseInt(t.target.value)})}})}),Object(x.jsx)(b.g,{top:"\u0428\u0438\u0440\u0438\u043d\u0430 \u043d\u0430\u043a\u043b\u0435\u0439\u043a\u0438 (\u0421\u041c)",style:{display:"block"},children:Object(x.jsx)(b.j,{type:"number",style:{width:"200px"},value:this.state.inputValueHeight,onChange:function(t){return e.setState({inputValueHeight:parseInt(t.target.value)})}})}),Object(x.jsx)(b.g,{top:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430",children:Object(x.jsx)(b.d,{checked:this.state.checked,onChange:function(){return e.setState({checked:!e.state.checked})},children:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u043e\u0447\u0442\u043e\u0439"})})]}),Object(x.jsxs)(b.f,{className:"ilustrat",children:[Object(x.jsx)(b.m,{placeholder:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d",options:this.state.items.map((function(e){return{label:e.title,value:e.id,avatar:e.thumb_photo}})),renderOption:function(e){var t=e.option,n=Object(f.a)(e,y);return Object(x.jsx)(b.e,Object(d.a)(Object(d.a)({},n),{},{before:Object(x.jsx)(b.c,{size:24,src:t.avatar})}))},onChange:function(t){return e.setState({itemsOption:t.target.value})}}),Object(x.jsx)("div",{className:"primire",children:this.handlerStiker()}),Object(x.jsx)("div",{className:"textsumm",children:Object(x.jsxs)("h1",{children:["\u0421\u0443\u043c\u043c\u0430: ",this.calculator()," \u0440\u0443\u0431."]})})]})]})]})}}]),n}(s.a.Component),w=function(){var e=Object(a.useState)(null),t=Object(p.a)(e,2),n=(t[0],t[1]);function s(){return(s=Object(h.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.send("VKWebAppGetAuthToken",{app_id:7894696,scope:"market"});case 2:return t=e.sent,n=t.access_token,e.next=6,u.a.send("VKWebAppCallAPIMethod",{method:"market.get",params:{owner_id:-178902955,v:"5.131",access_token:"".concat(n)}});case 6:return a=e.sent,e.abrupt("return",a.response.items);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){function e(){return(e=Object(h.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,n(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u.a.subscribe((function(e){var t=e.detail,n=t.type,a=t.data;if("VKWebAppUpdateConfig"===n){var s=document.createAttribute("scheme");s.value=a.scheme?a.scheme:"client_light",document.body.attributes.setNamedItem(s)}})),function(){e.apply(this,arguments)}()}),[]),Object(x.jsx)(b.a,{children:Object(x.jsx)(b.b,{children:Object(x.jsx)(b.n,{children:Object(x.jsx)(V,{items:function(){return s.apply(this,arguments)}()})})})})};u.a.send("VKWebAppInit"),r.a.render(Object(x.jsx)(w,{}),document.getElementById("root"))}},[[133,1,2]]]);
//# sourceMappingURL=main.c5f9a3ae.chunk.js.map